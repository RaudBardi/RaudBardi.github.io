(function(e){function t(t){for(var i,l,r=t[0],s=t[1],c=t[2],u=0,m=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&m.push(n[l][0]),n[l]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var s=a[r];0!==n[s]&&(i=!1)}i&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},n={app:0},o=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:""}}),a("v-main",[a("router-view")],1)],1)},o=[],l={name:"App"},r=l,s=(a("5c0b"),a("2877")),c=a("6544"),d=a.n(c),u=a("7496"),m=a("40dc"),f=a("f6c4"),v=Object(s["a"])(r,n,o,!1,null,null,null),h=v.exports;d()(v,{VApp:u["a"],VAppBar:m["a"],VMain:f["a"]});var p=a("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ClientList")},b=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticClass:"row-title"},[a("h2",[e._v("Список клиентов")]),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{color:"primary"},on:{click:e.setDefaultClients}},[a("span",{staticClass:"mr-2"},[e._v("Получить список")])]),a("v-btn",{staticClass:"white--text mx-2",attrs:{color:"error"},on:{click:e.resetClients}},[a("span",{staticClass:"mr-2"},[e._v("Очистить список")])]),a("v-btn",{staticClass:"white--text",attrs:{color:"teal"},on:{click:e.createItem}},[a("v-icon",[e._v("mdi-plus")]),a("span",{staticClass:"mr-2"},[e._v("Добавить клиента")])],1)],1),a("v-row",{staticClass:"text-center"},[a("v-col",[a("v-data-table",{staticClass:"clients-list",attrs:{headers:e.headers,items:e.clients,"items-per-page":10,"item-class":"item",loading:e.loading,"loading-text":"Загрузка..."},on:{"click:row":e.clickRow},scopedSlots:e._u([{key:"item.photo",fn:function(t){var i=t.item;return[i.photo?a("div",{staticClass:"item-photo-wrap"},[a("div",{staticClass:"item-photo"},[a("v-img",{attrs:{width:"36px",height:"36px",src:i.photo}})],1)]):a("v-icon",{attrs:{size:"36px"}},[e._v("mdi-account-circle")])]}},{key:"item.gender",fn:function(t){var a=t.item;return[e._v(" "+e._s("male"===a.gender?"Муж.":"Жен.")+" ")]}},{key:"item.hasFamily",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.hasFamily?"Есть":"Нет")+" ")]}},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-3",on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{on:{click:function(t){return t.stopPropagation(),e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}}])})],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-text",[a("v-container",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{counter:80,rules:e.fullNameRules,label:"ФИО",required:""},on:{input:function(t){return e.$refs.form.resetValidation()}},model:{value:e.editedItem.fullName,callback:function(t){e.$set(e.editedItem,"fullName",t)},expression:"editedItem.fullName"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-dialog",{ref:"dialog",attrs:{"return-value":e.editedItem.date,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.editedItem,"date",t)},"update:return-value":function(t){return e.$set(e.editedItem,"date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Дата рождения","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.editedItem.date,callback:function(t){e.$set(e.editedItem,"date",t)},expression:"editedItem.date"}},"v-text-field",n,!1),i))]}}]),model:{value:e.dateModal,callback:function(t){e.dateModal=t},expression:"dateModal"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:e.editedItemDateFormatted,callback:function(t){e.editedItemDateFormatted=t},expression:"editedItemDateFormatted"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dateModal=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.editedItem.date)}}},[e._v(" OK ")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.genders,label:"Пол","item-text":"label","item-value":"id"},model:{value:e.editedItem.gender,callback:function(t){e.$set(e.editedItem,"gender",t)},expression:"editedItem.gender"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-checkbox",{attrs:{label:e.editedItem.hasFamily?"Есть семья":"Нет семьи"},model:{value:e.editedItem.hasFamily,callback:function(t){e.$set(e.editedItem,"hasFamily",t)},expression:"editedItem.hasFamily"}})],1)],1),a("v-row",[a("v-col",[a("div",{staticClass:"web-camera-container"},[e.editedItem.photo?a("div",{staticClass:"remove-photo",on:{click:function(t){e.editedItem.photo=null}}},[a("v-icon",{attrs:{size:"24px",color:"#FFFFFF"}},[e._v(" mdi-close ")])],1):e._e(),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isCameraOpen,expression:"!isCameraOpen"}],attrs:{color:"darken-1",text:"",width:"420px",height:"420px"},on:{click:e.toggleCamera}},[e.editedItem.photo?a("v-img",{attrs:{src:e.editedItem.photo,width:"240px",height:"240px"}}):a("v-icon",{attrs:{size:"240px"}},[e._v(" mdi-account ")])],1),e.isCameraOpen?[e.isLoading?a("div",{staticClass:"camera-loading"},[a("ul",{staticClass:"loader-circle"},[a("li"),a("li"),a("li")])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"camera-box",class:{flash:e.isShotPhoto}},[a("div",{staticClass:"camera-shutter",class:{flash:e.isShotPhoto}}),a("video",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",attrs:{width:450,height:337.5,autoplay:""}}),a("canvas",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",attrs:{id:"photoTaken",width:450,height:337.5}})]),e.isLoading?e._e():a("div",{staticClass:"camera-shoot"},[a("v-btn",{attrs:{width:"60px",height:"60px",icon:""},on:{click:e.takePhoto}},[a("v-icon",{attrs:{size:"60px"}},[e._v("mdi-camera")])],1)],1)]:e._e()],2)])],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.close}},[e._v(" Отменить ")]),a("v-spacer"),a("v-btn",{attrs:{color:"teal darken-1",text:""},on:{click:e.save}},[e._v(" Сохранить ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"380px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",[e._v("Хотите удалить данного клиента?")]),a("v-card-actions",{staticClass:"actions"},[a("v-spacer"),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.closeDelete}},[e._v("Отменить")]),a("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Удалить")]),a("v-spacer")],1)],1)],1)],1)},x=[],k=a("3835"),I=a("5530"),w=(a("9911"),a("7db0"),a("ac1f"),a("1276"),a("99af"),a("4d90"),a("159b"),a("5319"),a("2f62")),y={name:"ClientsList",data:function(){return{valid:!0,fullNameRules:[function(e){return!!e||"ФИО обязательно"},function(e){return e&&e.length>=2||"Минимум 3 символа"},function(e){return e&&e.length<=81||"Максимум 80 символа"}],genders:[{id:"male",label:"Муж."},{id:"female",label:"Жен."}],dialogEdit:!1,dialogDelete:!1,dateModal:!1,editedItem:{id:null,fullName:null,date:null,gender:null,hasFamily:null,photo:null},defaultItem:{id:null,fullName:null,date:null,gender:null,hasFamily:null,photo:null},isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,link:"#"}},computed:Object(I["a"])(Object(I["a"])({},Object(w["c"])({loading:function(e){return e.loading},clients:function(e){return e.clients}})),{},{headers:function(){return[{text:"",align:"center",sortable:!1,value:"photo",width:"50px"},{text:"ФИО",align:"start",sortable:!0,value:"fullName"},{text:"Дата рождения",value:"date"},{text:"Пол",value:"gender"},{text:"Есть семья",value:"hasFamily"},{text:"Actions",align:"right",value:"actions",sortable:!1}]},editedItemDateFormatted:{get:function(){return this.parseDate(this.editedItem.date)},set:function(e){this.editedItem.date=this.formatDate(e)}}}),methods:Object(I["a"])(Object(I["a"])({},Object(w["b"])({addClient:"addClient",updateClient:"updateClient",removeClient:"removeClient",resetClients:"resetClients",setDefaultClients:"setDefaultClients"})),{},{clickRow:function(e){this.editItem(e)},createItem:function(){this.editedItem=Object.assign({},this.defaultItem),this.editedItem.id=this.clients.length+1,this.editedItem.date=this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),this.dialogEdit=!0},editItem:function(e){this.editedIndex=this.clients.indexOf(e),this.editedItem=Object.assign({},e),this.dialogEdit=!0},deleteItem:function(e){this.editedIndex=this.clients.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(e){this.removeClient(e),this.closeDelete()},close:function(){var e=this;this.dialogEdit=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.isCameraOpen=!1,e.isPhotoTaken=!1,e.isShotPhoto=!1,e.isLoading=!1,e.link="#",e.$refs.form.resetValidation(),e.$refs.form.reset()}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.$refs.form.resetValidation(),e.$refs.form.reset()}))},save:function(){var e=this;this.$refs.form.validate(),this.$nextTick((function(){e.valid&&(e[e.clients.find((function(t){return t.id===e.editedItem.id}))?"updateClient":"addClient"](e.editedItem),e.$nextTick((function(){e.close()})))}))},formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(k["a"])(t,3),i=a[0],n=a[1],o=a[2];return"".concat(o,".").concat(n,".").concat(i)},parseDate:function(e){if(!e)return null;var t=e.split("."),a=Object(k["a"])(t,3),i=a[0],n=a[1],o=a[2];return"".concat(o,"-").concat(n.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},toggleCamera:function(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement:function(){var e=this;this.isLoading=!0;var t=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(t).then((function(t){e.isLoading=!1,e.$refs.camera.srcObject=t})).catch((function(){e.isLoading=!1,alert("May the browser didn't support or there is some errors.")}))},stopCameraStream:function(){var e=this.$refs.camera.srcObject.getTracks();e.forEach((function(e){e.stop()}))},takePhoto:function(){var e=this;if(!this.isPhotoTaken){this.isShotPhoto=!0;var t=50;setTimeout((function(){e.isShotPhoto=!1}),t)}this.isPhotoTaken=!this.isPhotoTaken;var a=this.$refs.canvas.getContext("2d");a.drawImage(this.$refs.camera,0,0,450,337.5),this.editedItem.photo=document.getElementById("photoTaken").toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream")}})},O=y,V=(a("b17e"),a("8336")),_=a("b0af"),D=a("99d9"),j=a("ac7c"),P=a("62ad"),T=a("a523"),F=a("8fea"),S=a("2e4b"),$=a("169a"),N=a("4bd4"),L=a("132d"),E=a("adda"),M=a("0fd9"),A=a("b974"),R=a("2fa4"),z=a("8654"),B=Object(s["a"])(O,C,x,!1,null,null,null),H=B.exports;d()(B,{VBtn:V["a"],VCard:_["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VCheckbox:j["a"],VCol:P["a"],VContainer:T["a"],VDataTable:F["a"],VDatePicker:S["a"],VDialog:$["a"],VForm:N["a"],VIcon:L["a"],VImg:E["a"],VRow:M["a"],VSelect:A["a"],VSpacer:R["a"],VTextField:z["a"]});var J={name:"Home",components:{ClientList:H}},U=J,q=Object(s["a"])(U,g,b,!1,null,null,null),K=q.exports;i["a"].use(p["a"]);var G=[{path:"/",name:"Home",component:K}],Q=new p["a"]({routes:G}),W=Q,X=[{id:1,fullName:"Иванов С.Н.",date:"05.03.1975",gender:"male",hasFamily:!0,photo:null},{id:2,fullName:"Петров С.Н.",date:"15.06.1985",gender:"male",hasFamily:!1,photo:null},{id:3,fullName:"Сидоров А.В.",date:"25.09.1995",gender:"male",hasFamily:!1,photo:null},{id:4,fullName:"Иванов С.Н.",date:"05.03.1975",gender:"male",hasFamily:!0,photo:null},{id:5,fullName:"Петров С.Н.",date:"15.06.1985",gender:"male",hasFamily:!1,photo:null},{id:6,fullName:"Сидоров А.В.",date:"25.09.1995",gender:"male",hasFamily:!1,photo:null}],Y={clients:[],clientsDefault:X,loading:!1},Z=a("2909"),ee=(a("c740"),a("a434"),{resetClients:function(e){e.clients=[]},setDefaultClients:function(e){e.clients=Object(Z["a"])(e.clientsDefault)},addClient:function(e,t){e.clients.push(t)},updateClient:function(e,t){var a=e.clients.findIndex((function(e){return e.id===t.id}));e.clients.splice(a,1,Object(I["a"])({},t))},removeClient:function(e,t){var a=e.clients.findIndex((function(e){return e.id===t.id}));e.clients.splice(a,1)},setLoading:function(e,t){e.loading=t}}),te={setLoading:function(e){var t=e.commit,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t("setLoading",a)},resetClients:function(e,t){var a=e.commit;a("resetClients",t)},setDefaultClients:function(e,t){var a=e.commit;a("setDefaultClients",t)},addClient:function(e,t){var a=e.commit;a("addClient",t)},updateClient:function(e,t){var a=e.commit;a("updateClient",t)},removeClient:function(e,t){var a=e.commit;a("removeClient",t)}},ae={};i["a"].use(w["a"]);var ie=new w["a"].Store({namespaced:!0,state:Y,mutations:ee,actions:te,getters:ae}),ne=a("f309"),oe=a("e1bf");i["a"].use(ne["a"],{components:{VAppBar:m["a"],VMain:f["a"],VRow:M["a"],VCol:P["a"],VSpacer:R["a"],VBtn:V["a"],VIcon:L["a"],VDataTable:F["a"],VDialog:$["a"],VCard:_["a"],VCardText:D["b"],VCardActions:D["a"],VContainer:T["a"],VTextField:z["a"],VDatePicker:S["a"],VSelect:A["a"],VCheckbox:j["a"]}});var le={lang:{locales:{ru:oe["a"]},current:"ru"}},re=new ne["a"](le);i["a"].config.productionTip=!1,new i["a"]({router:W,store:ie,vuetify:re,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){},b17e:function(e,t,a){"use strict";a("df7b")},df7b:function(e,t,a){}});
//# sourceMappingURL=app.ca43dc18.js.map